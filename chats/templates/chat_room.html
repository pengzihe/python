{% extends "index.html" %}
{% block page-content %}

<style type="text/css">

.div_border{border:solid black 1px}
#chat{ height:500px}
#member_list{ height:589px}
#send_msg{ 
	height:67px;
	//width:80%;
}
</style>


--------------
<div id="main" class="container">
	<div id="main_chat" class="div_border col-xs-12 col-md-8">
    	main
        <div id="chat" class="div_border">
            display all meesages here
        </div> <!-- end chat -->
        <div id="send_msg" class="div_border">
            
            <textarea cols="70" rows="3" id="msg" style="margin-left: 0px; margin-right: 0px; width: 581px;"></textarea>
            <button class="btn btn-success pull-right" type="submit" onclick="sendMsg()">Send</button>
        </div><!-- end send_msg -->
    </div> <!-- end main_chat -->
    <div id="member_list" class="div_border col-xs-5 col-md-2">
    	steven
    	mico
    </div><!-- end member_list_chat -->
</div> <!-- end main -->

<script type="text/javascript">
	
	function currentTime(){
		var d = new Date(),str = '';
		str += d.getFullYear()+'-';   //年
		str  += d.getMonth() + 1+'-';  //月
		str  += d.getDate()+'_';    //日
		str += d.getHours()+':';    //时
		str  += d.getMinutes()+':';   //分
		str+= d.getSeconds()+'';    //秒
		return str;
	}  //end currentTime

	function sendMsg()
	{
		var message = $('#msg').val();
		var time = currentTime();
		console.log(message);
		$.get('/getMsg/',{user: "{{ user }}",msg:message})
		$('#chat').append("<span>" + time + "<br>" + message + "</span><br>");
		$('#msg').val('');
	} // end sendMsg
	
	$('#msg').keyup(function(event){
			if(event.keyCode == 13)
			{
					sendMsg();
			}
		}) //end keyup
		
</script>

{% endblock %}